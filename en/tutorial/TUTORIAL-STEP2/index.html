
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://onukiyuma.github.io/new_SINETStream/en/tutorial/TUTORIAL-STEP2/">
      
      
        <link rel="prev" href="../TUTORIAL-STEP1/">
      
      
        <link rel="next" href="../../tutorial-android/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>STEP2 - SINETStream</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-step2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="SINETStream" class="md-header__button md-logo" aria-label="SINETStream" data-md-component="logo">
      
  <img src="../../../images/SiNETStream.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SINETStream
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              STEP2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../tutorial/TUTORIAL-STEP2/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../docm/" class="md-tabs__link">
          
  
  About SINETStream

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Tutorial

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../userguide/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer_guide/" class="md-tabs__link">
          
  
  Developer guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../news/20240329-release_v19/" class="md-tabs__link">
          
  
  News

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="SINETStream" class="md-nav__button md-logo" aria-label="SINETStream" data-md-component="logo">
      
  <img src="../../../images/SiNETStream.png" alt="logo">

    </a>
    SINETStream
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About SINETStream
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About SINETStream
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance measurement of SINETStream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livedemo/livedemo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live demo of SINETStream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Build SINETStream server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Build SINETStream server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server construction procedure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E8%AA%8D%E8%A8%BC%E5%B1%80%E3%81%A7%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%82%92%E4%BD%9C%E6%88%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a certificate with a private certificate authority
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/Kafkabroker%E3%81%AE%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mosquitto construction procedure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/mosquitto%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka broker setup procedure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update log
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python/Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Python/Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-STEP1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STEP1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    STEP2
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    STEP2
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1. Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notational-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Notational conventions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-prepare-the-execution-environment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Prepare the execution environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Prepare the execution environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-prepare-broker" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Prepare Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1. Prepare Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-prepare-the-backend-system" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.1. Prepare the backend system
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-prepare-reader" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Prepare Reader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2. Prepare Reader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-start-the-readers-container-environment" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1. Start the Reader's container environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-install-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2. Install SINETStream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-prepare-reader-program-and-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3. Prepare Reader program and configuration file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-prepare-writer" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Prepare Writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3. Prepare Writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-start-the-writers-container" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1. Start the Writer's container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-install-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2. Install SINETStream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-prepare-writer-program-and-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3. Prepare Writer program and configuration file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-run-reader-and-writer" class="md-nav__link">
    <span class="md-ellipsis">
      3. Run Reader and Writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Run Reader and Writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-to-send-and-receive-messages-tofrom-kafka-brokers" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. To send and receive messages to/from Kafka brokers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1. To send and receive messages to/from Kafka brokers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Run Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Run Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-and-receive-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Send and receive messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-that-the-message-is-being-delivered-by-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Verify that the message is being delivered by Broker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-reader-and-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Reader and Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-to-send-and-receive-messages-tofrom-mqtt-broker-mosquitto" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 To send and receive messages to/from MQTT broker (Mosquitto)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 To send and receive messages to/from MQTT broker (Mosquitto)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-reader_1" class="md-nav__link">
    <span class="md-ellipsis">
      Run Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-writer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Run Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-and-receive-messages_1" class="md-nav__link">
    <span class="md-ellipsis">
      Send and receive messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-reader-and-writer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Reader and Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-stopping-and-deleting-containers" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Stopping and deleting containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-about-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      4. About SINETStream
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. About SINETStream">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Configuration file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-sinetstream-api" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. SINETStream API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2. SINETStream API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reader" class="md-nav__link">
    <span class="md-ellipsis">
      Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer" class="md-nav__link">
    <span class="md-ellipsis">
      Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-sinetstream-api-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. SINETStream API (asynchronous API)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3. SINETStream API (asynchronous API)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reader-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      Reader (asynchronous API)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      Writer (asynchronous API)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    sinetstream-android-echo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            sinetstream-android-echo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step1-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Send and receive text messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANDROID-STEP1
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2_3" >
        
          
          <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    sinetstream-android-sensor-publisher
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            sinetstream-android-sensor-publisher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step2-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish Sensor readout values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANDROID-STEP2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step2-webbrowser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A web interface for the sensor data visualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-step2-location/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic update of the device location data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/sinetstreamhelper-tutorial-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream Android Tutorial Container
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation of the sample Android application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/TUTORIAL-android-keychain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation of certificates in the system credential storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial-android/sinetstreamhelper-tutorial-container/TUTORIAL-docker-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DOCKER-CONTAINER
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream for Android User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream for Android
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config-client-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream User Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SINETStreamHelper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            SINETStreamHelper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/libhelper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStreamHelper User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-libhelper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStreamHelper Library
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication and authorization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/compat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Messaging system
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Messaging system
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_broker_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_broker_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    message type
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            message type
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_value_type_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_value_type_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    compression
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            compression
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_compression_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_compression_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/message_format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message Format
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    News
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            News
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20240329-release_v19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.9版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20230526-release_v18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.8版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20220922-release_v17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.7版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20220427-release-demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デモパッケージ最新版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20211223-release_v16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20210324-release_v15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200731-release_v14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200731-release_v13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200609-release_v12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1. Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notational-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Notational conventions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-prepare-the-execution-environment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Prepare the execution environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Prepare the execution environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-prepare-broker" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Prepare Broker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1. Prepare Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-prepare-the-backend-system" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.1. Prepare the backend system
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-prepare-reader" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Prepare Reader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2. Prepare Reader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-start-the-readers-container-environment" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1. Start the Reader's container environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-install-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2. Install SINETStream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-prepare-reader-program-and-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3. Prepare Reader program and configuration file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-prepare-writer" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Prepare Writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3. Prepare Writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-start-the-writers-container" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1. Start the Writer's container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-install-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2. Install SINETStream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-prepare-writer-program-and-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3. Prepare Writer program and configuration file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-run-reader-and-writer" class="md-nav__link">
    <span class="md-ellipsis">
      3. Run Reader and Writer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Run Reader and Writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-to-send-and-receive-messages-tofrom-kafka-brokers" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. To send and receive messages to/from Kafka brokers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1. To send and receive messages to/from Kafka brokers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Run Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Run Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-and-receive-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Send and receive messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-that-the-message-is-being-delivered-by-broker" class="md-nav__link">
    <span class="md-ellipsis">
      Verify that the message is being delivered by Broker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-reader-and-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Reader and Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-to-send-and-receive-messages-tofrom-mqtt-broker-mosquitto" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 To send and receive messages to/from MQTT broker (Mosquitto)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 To send and receive messages to/from MQTT broker (Mosquitto)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-reader_1" class="md-nav__link">
    <span class="md-ellipsis">
      Run Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-writer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Run Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-and-receive-messages_1" class="md-nav__link">
    <span class="md-ellipsis">
      Send and receive messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-reader-and-writer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Stop Reader and Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-stopping-and-deleting-containers" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Stopping and deleting containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-about-sinetstream" class="md-nav__link">
    <span class="md-ellipsis">
      4. About SINETStream
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. About SINETStream">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Configuration file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-sinetstream-api" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. SINETStream API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2. SINETStream API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reader" class="md-nav__link">
    <span class="md-ellipsis">
      Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer" class="md-nav__link">
    <span class="md-ellipsis">
      Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-sinetstream-api-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. SINETStream API (asynchronous API)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3. SINETStream API (asynchronous API)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reader-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      Reader (asynchronous API)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer-asynchronous-api" class="md-nav__link">
    <span class="md-ellipsis">
      Writer (asynchronous API)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<!--
Copyright (C) 2020 National Institute of Informatics

Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<h1 id="tutorial-step2">Tutorial - STEP2</h1>
<h2 id="1-overview">1. Overview</h2>
<p>The components used in this tutorial are shown in the figure below.</p>
<p><img alt="configuration STEP2" src="../../../tutorial/images/tutorial-020.png" /></p>
<p>The role of those components shown in <a href="../#preface">Quick Start Guide</a> are as follows.</p>
<ul>
<li><code>Writer</code> sends messages to <code>Broker</code> via <code>SINETStream</code></li>
<li><code>Reader</code> receives messages from <code>Broker</code> via <code>SINETStream</code></li>
<li><code>Broker</code> aggregates and delivers messages from <code>Writer</code> to <code>Reader</code>, and separates the endpoints from each other.</li>
</ul>
<p>In the STEP1 of the tutorial, <code>Writer</code>, <code>Reader</code>, and <code>Broker</code> were executed on the same machine.
In the STEP2, in contrast, <code>Writer</code>, <code>Reader</code>, and <code>Broker</code> are executed on each different machines.</p>
<h3 id="prerequisite">Prerequisite</h3>
<ol>
<li>Docker Engine must be installed on the machines where you run the tutorial.<ul>
<li>You can find information about installing Docker Engine in <a href="../#links-to-docker-engine-installation-instructions">Links to Docker Engine installation instructions</a>.</li>
</ul>
</li>
<li>Make the TCP/1883 and TCP/9092 ports available on the Broker machine.<ul>
<li>These ports will be used by the broker for listening TCP.</li>
</ul>
</li>
<li>Enable access to TCP/1883 and TCP/9092 ports on the Broker machine from the <code>Writer</code> and <code>Reader</code> machines.<ul>
<li>Please set your firewall policy so that these communications are not blocked.</li>
</ul>
</li>
</ol>
<h3 id="notational-conventions">Notational conventions</h3>
<p>There will be six environments: the host environment and the container environment for each of <code>Writer</code>, <code>Reader</code>, and <code>Broker</code>.
We use the following conventions for distinguishing them.</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Environment</th>
<th>Hostname</th>
<th>Username</th>
<th>IP address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Broker</td>
<td>host environment</td>
<td>host-broker</td>
<td>user00</td>
<td><code>192.168.1.XXX</code></td>
</tr>
<tr>
<td>Reader</td>
<td>host environment</td>
<td>host-reader</td>
<td>user00</td>
<td>-</td>
</tr>
<tr>
<td>Writer</td>
<td>host environment</td>
<td>host-writer</td>
<td>user00</td>
<td>-</td>
</tr>
<tr>
<td>Broker</td>
<td>container environment</td>
<td>broker</td>
<td>user01</td>
<td>-</td>
</tr>
<tr>
<td>Reader</td>
<td>container environment</td>
<td>reader</td>
<td>user01</td>
<td>-</td>
</tr>
<tr>
<td>Writer</td>
<td>container environment</td>
<td>writer</td>
<td>user01</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>Please change the values of the host environment according to your actual machines.
In the command execution examples below, the execution environment is indicated by the hostname and the username of the command prompt.
For example, execution of a command on the <code>Writer</code>'s container environment is shown as follows.</p>
<pre><code class="language-console">[user01@writer]$ ls
</code></pre>
<p>In the above example, the username is <code>user01</code> and the hostname is <code>writer</code> in the <code>Writer</code>'s container environment.
The <code>Writer</code>'s host environment would be shown as follows.</p>
<pre><code class="language-console">[user00@host-writer]$ ls
</code></pre>
<h2 id="2-prepare-the-execution-environment">2. Prepare the execution environment</h2>
<p>Prepare three environments for <code>Broker</code>, <code>Reader</code>, and <code>Writer</code>, in this order.
Open the terminal for three machines and perform the operations as follows.</p>
<h3 id="21-prepare-broker">2.1. Prepare Broker</h3>
<h4 id="211-prepare-the-backend-system">2.1.1. Prepare the backend system</h4>
<p>Run the backend messaging systems (Kafka and MQTT) used by SINETStream in a Docker container.</p>
<p>Execute the following command in the <code>Broker</code>'s host environment.</p>
<pre><code class="language-console">[user00@host-broker]$ docker run -d --name broker --hostname broker \
                      -p 1883:1883 -p 9092:9092 harbor.vcloud.nii.ac.jp/sinetstream/tutorial:1.8
</code></pre>
<p>Show the status to confirm that the container has started successfully.</p>
<pre><code class="language-console">[user00@host-broker]$ docker ps -l
CONTAINER ID        IMAGE                        COMMAND                  CREATED              STATUS              PORTS                                            NAMES
xxxxxxxxxxxx        sinetstream/tutorial:1.8   &quot;/usr/local/bin/supe…&quot;   About a minute ago   Up About a minute   0.0.0.0:1883-&gt;1883/tcp, 0.0.0.0:9092-&gt;9092/tcp   broker
</code></pre>
<p>If <code>STATUS</code> is shown as <code>Up</code>, the container has started successfully.</p>
<p>In the started container, the broker of the messaging systems, i.e., Kafka and MQTT (Mosquitto), are running.
The processes running in the container can be checked as follows.</p>
<pre><code class="language-console">[user00@host-broker]$ docker exec -t broker ps ax
  PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:00 /usr/bin/python3 /usr/local/bin/supervisord -n -c /et
    9 ?        Sl     0:05 java -Xmx1G -Xms1G -server -XX:+UseG1GC -XX:MaxGCPaus
   10 ?        S      0:00 /usr/sbin/mosquitto -c /etc/mosquitto/mosquitto.conf
   12 ?        Sl     0:01 java -Xmx512M -Xms512M -server -XX:+UseG1GC -XX:MaxGC
  822 pts/0    Rs+    0:00 ps ax
</code></pre>
<p>The role of each process shown in the above example is as follows.</p>
<ul>
<li>PID 1<ul>
<li><code>init</code> process</li>
<li>Manages the services running in this container</li>
</ul>
</li>
<li>PID 9<ul>
<li>The Kafka broker</li>
</ul>
</li>
<li>PID 10<ul>
<li>The MQTT (Mosquitto) broker</li>
</ul>
</li>
<li>PID 12<ul>
<li>ZooKeeper</li>
<li>The service used by Kafka to store settings, configuration information, etc.</li>
</ul>
</li>
<li>PID 822<ul>
<li>The ps command executed to show this process list.</li>
</ul>
</li>
</ul>
<h3 id="22-prepare-reader">2.2. Prepare Reader</h3>
<p>Prepare the <code>Reader</code>'s environment in a Docker container.</p>
<h4 id="221-start-the-readers-container-environment">2.2.1. Start the Reader's container environment</h4>
<p>Execute the following command in the <code>Reader</code>'s host environment.</p>
<pre><code class="language-console">[user00@host-reader]$ docker run -d --name reader --hostname reader -e ENABLE_BROKER=false \
                      --add-host=broker:192.168.1.xxx harbor.vcloud.nii.ac.jp/sinetstream/tutorial:1.8
</code></pre>
<blockquote>
<p>Specify the IP address of the <code>Broker</code> in your environment in place of <code>192.168.1.XXX</code>.</p>
</blockquote>
<p>Show the status to confirm that the container has started successfully.</p>
<pre><code class="language-console">[user00@host-reader]$ docker ps -l
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                NAMES
xxxxxxxxxxxx        sinetstream/tutorial:1.8   &quot;/usr/local/bin/supe…&quot;   About a minute ago  Up About a minute   1883/tcp, 9092/tcp   reader
</code></pre>
<p>If <code>STATUS</code> is shown as <code>Up</code>, the container has started successfully.</p>
<p>Here we run the same container image as the <code>Broker</code>'s one, but the <code>-e ENABLE_BROKER = false</code> option prevents <code>Broker</code> from being started.
Show the status to confirm it.</p>
<pre><code class="language-console">[user00@host-reader]$ docker exec -t reader ps ax
  PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:00 /usr/bin/python3 /usr/local/bin/supervisord -n -c /et
   30 pts/0    Rs+    0:00 ps ax
</code></pre>
<p>Unlike the status of the <code>Broker</code>'s container, here the Kafka broker, the MQTT broker and ZooKeeper are not running.</p>
<p>The <code>--add-host</code> option specified when starting the <code>Reader</code>'s container is for put the <code>Broker</code>'s IP address into the /etc/hosts file in the <code>Reader</code>'s container.
This option is required because the server name must be resolved for the Kafka broker to work.
Show the /etc/hosts file in the <code>Reader</code>'s container to confirm that the <code>Broker</code>'s IP address is registered.</p>
<pre><code class="language-console">[user00@host-reader]$ docker exec -t reader cat /etc/hosts
127.0.0.1       localhost
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
192.168.1.XXX   broker
172.17.0.3      reader
</code></pre>
<blockquote>
<p>The <code>Broker</code>'s IP address specified when starting the container is shown in place of <code>192.168.1.XXX</code>.
The Reader's IP address will differ depending on your environment.</p>
</blockquote>
<h4 id="222-install-sinetstream">2.2.2. Install SINETStream</h4>
<p>Install the Python3 library of SINETStream on the container environment.
First, log in to the container environment from the <code>Reader</code>'s host environment.</p>
<pre><code class="language-console">[user00@host-reader]$ docker exec -it -u user01 reader bash
</code></pre>
<p>Next, install the library of SINETStream on the container environment.
Please execute the following command.</p>
<pre><code class="language-console">[user01@reader]$ pip3 install --user sinetstream-kafka sinetstream-mqtt
Collecting sinetstream-kafka
(omit)
Successfully installed avro-python3-1.10.0 kafka-python-2.0.2 paho-mqtt-1.5.1 promise-2.3 pycryptodome-3.9.9 pyyaml-3.13 sinetstream-1.4.0 sinetstream-kafka-1.4.0 sinetstream-mqtt-1.4.0 six-1.15.0
</code></pre>
<p>Finally, if the message <code>Successfully installed ...</code> is shown, the library has been successfully installed.
To show the list of installed Python 3 libraries, use the following command.</p>
<pre><code class="language-console">[user01@reader]$ pip3 list
Package           Version
----------------- --------
avro-python3      1.10.0
kafka-python      2.0.2
paho-mqtt         1.5.1
pip               20.2.4
promise           2.3
pycryptodome      3.9.9
PyYAML            3.13
setuptools        50.3.2
sinetstream       1.4.0
sinetstream-kafka 1.4.0
sinetstream-mqtt  1.4.0
six               1.15.0
supervisor        4.2.1
</code></pre>
<blockquote>
<p>The <code>Version</code>s of other libraries than SINETStream may differ from the above example.</p>
</blockquote>
<h4 id="223-prepare-reader-program-and-configuration-file">2.2.3. Prepare Reader program and configuration file</h4>
<p>Below is the procedure.</p>
<ol>
<li>Create a directory for <code>Reader</code></li>
<li>Prepare the SINETStream configuration file</li>
<li>Prepare the <code>Reader</code> program</li>
</ol>
<blockquote>
<p>In this section, the command is executed in the container environment. We use the same container environment as in section <code>2.2.2</code>.</p>
</blockquote>
<p>Create a directory and change to that directory.</p>
<pre><code class="language-console">[user01@reader]$ mkdir -p ~/sinetstream/reader
[user01@reader]$ cd ~/sinetstream/reader
</code></pre>
<p>Prepare the SINETStream configuration file. Download the configuration file prepared for this tutorial from GitHub.</p>
<pre><code class="language-console">[user01@reader]$ ss_url=https://raw.githubusercontent.com/nii-gakunin-cloud/sinetstream/main
[user01@reader]$ curl -O ${ss_url}/docs/tutorial/.sinetstream_config.yml
</code></pre>
<p>Download the sample program of Reader that uses the SINETStream Python3 API from GitHub. Grant execute permission to the program.</p>
<pre><code class="language-console">[user01@reader]$ curl -O ${ss_url}/python/sample/text/consumer.py
[user01@reader]$ chmod a+x consumer.py
</code></pre>
<p>Verify that the above procedure has been performed correctly.
Make sure that the directories and files are the same as in the example below.</p>
<pre><code class="language-console">[user01@reader]$ pwd
/home/user01/sinetstream/reader
[user01@reader]$ ls -a
.  ..  .sinetstream_config.yml  consumer.py
</code></pre>
<h3 id="23-prepare-writer">2.3. Prepare Writer</h3>
<p>Prepare <code>Writer</code> in the container environment.
Below is the procedure.</p>
<h4 id="231-start-the-writers-container">2.3.1. Start the Writer's container</h4>
<p>Execute the following command in the <code>Writer</code>'s host environment.</p>
<pre><code class="language-console">[user00@host-writer]$ docker run -d --name writer --hostname writer -e ENABLE_BROKER=false \
                      --add-host=broker:192.168.1.xxx harbor.vcloud.nii.ac.jp/sinetstream/tutorial:1.8
</code></pre>
<blockquote>
<p>Specify the <code>Broker</code>'s IP address in place of <code>192.168.1.XXX</code>.</p>
</blockquote>
<p>Show the status to confirm that the container has started successfully.</p>
<pre><code class="language-console">[user00@host-writer]$ docker ps -l
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                NAMES
xxxxxxxxxxxx        sinetstream/tutorial:1.8   &quot;/usr/local/bin/supe…&quot;   About a minute ago  Up About a minute   1883/tcp, 9092/tcp   writer
</code></pre>
<p>If <code>STATUS</code> is shown as <code>Up</code>, the container has started successfully.</p>
<p>Since you specified the <code>-e ENABLE_BROKER=false</code> option, <code>Broker</code> will not run in the container.
Show the status to confirm it.</p>
<pre><code class="language-console">[user00@host-writer]$ docker exec -t writer ps ax
  PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:00 /usr/bin/python3 /usr/local/bin/supervisord -n -c /et
   31 pts/0    Rs+    0:00 ps ax
</code></pre>
<p>Also, since you specified the <code>--add-host</code> option, the <code>Broker</code>'s IP address is put into the /etc/hosts file in the Writer's container.
Show the /etc/hosts file to confirm it.</p>
<pre><code class="language-console">[user00@host-writer]$ docker exec -t writer cat /etc/hosts
127.0.0.1       localhost
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
192.168.1.XXX   broker
172.17.0.4      writer
</code></pre>
<blockquote>
<p>The <code>Broker</code>'s IP address specified when starting the container is shown in place of <code>192.168.1.XXX</code>.
The <code>Writer</code>'s IP address will differ depending on your environment.</p>
</blockquote>
<h4 id="232-install-sinetstream">2.3.2. Install SINETStream</h4>
<p>Install the Python3 library of SINETStream on the container environment.
First, log in to the container environment from the Reader's host environment.</p>
<pre><code class="language-console">[user00@host-writer]$ docker exec -it -u user01 writer bash
</code></pre>
<p>Next, install the library of SINETStream on the container environment.
Please execute the following command.</p>
<pre><code class="language-console">[user01@writer]$ pip3 install --user sinetstream-kafka sinetstream-mqtt
Collecting sinetstream-kafka
(omit)
Successfully installed avro-python3-1.10.0 kafka-python-2.0.2 paho-mqtt-1.5.1 promise-2.3 pycryptodome-3.9.9 pyyaml-3.13 sinetstream-1.4.0 sinetstream-kafka-1.4.0 sinetstream-mqtt-1.4.0 six-1.15.0
</code></pre>
<p>Finally, if the message <code>Successfully installed ...</code> is shown, the library has been successfully installed.
To show the list of installed Python 3 libraries, use the following command.</p>
<pre><code class="language-console">[user01@writer]$ pip3 list
Package           Version
----------------- --------
avro-python3      1.10.0
kafka-python      2.0.2
paho-mqtt         1.5.1
pip               20.2.4
promise           2.3
pycryptodome      3.9.9
PyYAML            3.13
setuptools        50.3.2
sinetstream       1.4.0
sinetstream-kafka 1.4.0
sinetstream-mqtt  1.4.0
six               1.15.0
supervisor        4.2.1
</code></pre>
<blockquote>
<p>The <code>Version</code>s of other libraries than SINETStream may differ from the above example.</p>
</blockquote>
<h4 id="233-prepare-writer-program-and-configuration-file">2.3.3. Prepare Writer program and configuration file</h4>
<p>Below is the procedure.</p>
<ol>
<li>Create a directory for <code>Writer</code></li>
<li>Prepare the SINETStream configuration file</li>
<li>Prepare the <code>Writer</code> program</li>
</ol>
<blockquote>
<p>In this section, the command is executed in the container environment.
We use the same container environment as in section <code>2.3.2</code>.</p>
</blockquote>
<p>Create a directory and change to that directory.</p>
<pre><code class="language-console">[user01@writer]$ mkdir -p ~/sinetstream/writer
[user01@writer]$ cd ~/sinetstream/writer
</code></pre>
<p>Prepare SINETStream configuration file.
Download the configuration file prepared for this tutorial from GitHub.</p>
<pre><code class="language-console">[user01@writer]$ ss_url=https://raw.githubusercontent.com/nii-gakunin-cloud/sinetstream/main
[user01@writer]$ curl -O ${ss_url}/docs/tutorial/.sinetstream_config.yml
</code></pre>
<p>Download the sample program of Writer that uses the SINETStream Python3 API from GitHub.
Grant execute permission to the program.</p>
<pre><code class="language-console">[user01@writer]$ curl -O ${ss_url}/python/sample/text/producer.py
[user01@writer]$ chmod a+x producer.py
</code></pre>
<p>Verify that the above procedure has been performed correctly.
Make sure that the directories and files are the same as in the example below.</p>
<pre><code class="language-console">[user01@writer]$ pwd
/home/user01/sinetstream/writer
[user01@writer]$ ls -a
.  ..  .sinetstream_config.yml  producer.py
</code></pre>
<h2 id="3-run-reader-and-writer">3. Run Reader and Writer</h2>
<p>Run <code>Reader</code> and <code>Writer</code> to confirm that messages can be sent and received via SINETStream.</p>
<p>SINETStream supports <a href="https://kafka.apache.org/">Kafka</a> and <a href="https://mosquitto.org/">MQTT(Mosquitto)</a> as backend messaging systems.
First, make sure that you can send and receive messages to/from the Kafka broker.
After that, confirm that you can send and receive messages to/from the MQTT broker by changing the settings (without changing the program).</p>
<h3 id="31-to-send-and-receive-messages-tofrom-kafka-brokers">3.1. To send and receive messages to/from Kafka brokers</h3>
<p>Thereafter, you will execute the <code>Reader</code> and <code>Writer</code> programs at the same time.
Open two terminals in the host environment to run them.</p>
<h4 id="run-reader">Run Reader</h4>
<p>In the terminal for <code>Reader</code>, log in to the container environment from the host environment.
Please execute the following command.</p>
<blockquote>
<p>You do not need to execute it if you are already logged in to the container environment.</p>
</blockquote>
<pre><code class="language-console">[user00@host-reader]$ docker exec -it -u user01 reader bash
</code></pre>
<p>Change to the directory for <code>Reader</code>.</p>
<pre><code class="language-console">[user01@reader]$ cd ~/sinetstream/reader
</code></pre>
<p>Run the <code>Reader</code> program.
In the argument, the service name of the Kafka broker <code>service-tutorial-kafka</code> is specified.</p>
<pre><code class="language-console">[user01@reader]$ ./consumer.py -s service-tutorial-kafka
Press ctrl-c to exit the program.
: service=service-tutorial-kafka
</code></pre>
<p>The service name specified in the command line is shown after the colon(<code>:</code>).</p>
<h4 id="run-writer">Run Writer</h4>
<p>In the terminal for <code>Writer</code>, log in to the container environment from the host environment.
Please execute the following command.</p>
<blockquote>
<p>You do not need to execute it if you are already logged in to the container environment.</p>
</blockquote>
<pre><code class="language-console">[user00@host-writer]$ docker exec -it -u user01 writer bash
</code></pre>
<p>Change to the directory for <code>Writer</code>.</p>
<pre><code class="language-console">[user01@writer]$ cd ~/sinetstream/writer
</code></pre>
<p>Run the <code>Writer</code> program. In the argument, the service name of the Kafka broker <code>service-tutorial-kafka</code> is specified.</p>
<pre><code class="language-console">[user01@writer]$ ./producer.py -s service-tutorial-kafka
Press ctrl-c to exit the program.
: service=service-tutorial-kafka
</code></pre>
<p>The service name specified in the command line is shown after the colon(<code>:</code>).</p>
<h4 id="send-and-receive-messages">Send and receive messages</h4>
<p>In the terminal for <code>Writer</code>, enter some text and hit the Enter (Return) key.
The text will be sent as a message to the Kafka broker.</p>
<p>The <code>Reader</code> program receives the message from the Kafka broker and shows it in the terminal.
Check that the message you sent from <code>Writer</code> is shown in the terminal for <code>Reader</code>.</p>
<h4 id="verify-that-the-message-is-being-delivered-by-broker">Verify that the message is being delivered by Broker</h4>
<p>Temporarily stop Broker to make sure that the messages sent by <code>Writer</code> are being delivered by <code>Broker</code>.</p>
<p>Execute the following command in the <code>Broker</code>'s host environment to stop the <code>Broker</code>'s container.</p>
<pre><code class="language-console">[user00@host-broker]$ docker stop broker
</code></pre>
<p>Try to send a message from the terminal for <code>Writer</code> using <code>producer.py</code>.
Since Broker is stopped, <code>Reader</code> cannot receive the message from <code>Writer</code>, and you will see nothing shown in the terminal for <code>Reader</code>.</p>
<p>Once confirmed, execute the following command in the Broker's host environment to restart the Broker container.</p>
<pre><code class="language-console">[user00@host-broker]$ docker start broker
</code></pre>
<h4 id="stop-reader-and-writer">Stop Reader and Writer</h4>
<p>Stop the sample programs of <code>Reader</code> and <code>Writer</code>.
Please type <code>ctrl-c</code> at each terminal.</p>
<h3 id="32-to-send-and-receive-messages-tofrom-mqtt-broker-mosquitto">3.2 To send and receive messages to/from MQTT broker (Mosquitto)</h3>
<p>Perform the same operation as for the Kafka broker.
Confirm that messages can be sent and received via the MQTT broker.
In the argument, specify the service name of the MQTT broker <code>service-tutorial-mqtt</code> in place of <code>service-tutorial-kafka</code> in the above example.</p>
<h4 id="run-reader_1">Run Reader</h4>
<p>Execute the following command in the terminal for <code>Reader</code>.</p>
<pre><code class="language-console">[user01@reader]$ ./consumer.py -s service-tutorial-mqtt
Press ctrl-c to exit the program.
: service=service-tutorial-mqtt
</code></pre>
<blockquote>
<p>The current directory of the terminal for <code>Reader</code> is assumed to be the <code>Reader</code>'s directory in the container environment.</p>
</blockquote>
<h4 id="run-writer_1">Run Writer</h4>
<p>To execute the following command in the terminal of <code>Writer</code>.</p>
<pre><code class="language-console">[user01@writer]$ ./producer.py -s service-tutorial-mqtt
Press ctrl-c to exit the program.
: service=service-tutorial-mqtt
</code></pre>
<blockquote>
<p>The current directory of the terminal for <code>Writer</code> is assumed to be the <code>Writer</code>'s directory in the container environment.</p>
</blockquote>
<h4 id="send-and-receive-messages_1">Send and receive messages</h4>
<p>Perform the same operations as for the Kafka broker.
In the <code>Writer</code>'s terminal enter some text and hit the Enter (Return) key.
Check that the text is shown in the <code>Reader</code>'s terminal.</p>
<h4 id="stop-reader-and-writer_1">Stop Reader and Writer</h4>
<p>Once the messages have been transmitted, stop the sample programs of <code>Reader</code> and <code>Writer</code>.
Please type <code>ctrl-c</code> at each terminal.</p>
<h3 id="33-stopping-and-deleting-containers">3.3. Stopping and deleting containers</h3>
<p>Finally, stop and delete the container used in this tutorial.</p>
<p>Operations on containers should be performed on the host environment.
To log out from the container environment, execute <code>exit</code> within the container.</p>
<pre><code class="language-console">[user01@reader]$ exit
exit
[user00@host-reader]$
</code></pre>
<p>After logging out of the host environment, execute the following command on each machine.</p>
<p><code>Broker</code></p>
<pre><code class="language-console">[user00@host-broker]$ docker stop broker
[user00@host-broker]$ docker rm broker
</code></pre>
<p><code>Reader</code></p>
<pre><code class="language-console">[user00@host-reader]$ docker stop reader
[user00@host-reader]$ docker rm reader
</code></pre>
<p><code>Writer</code></p>
<pre><code class="language-console">[user00@host-writer]$ docker stop writer
[user00@host-writer]$ docker rm writer
</code></pre>
<h2 id="4-about-sinetstream">4. About SINETStream</h2>
<p>Here is a brief description of the SINETStream configuration file and the API used in this tutorial.</p>
<blockquote>
<p>The description in this page is exactly the same as the one in STEP1.</p>
</blockquote>
<h3 id="41-configuration-file">4.1. Configuration file</h3>
<p>The contents of the SINETStream configuration file <code>.sinetstream_config.yml</code> is as follows.</p>
<pre><code class="language-yaml">service-tutorial-kafka:
    type: kafka
    brokers: &quot;broker:9092&quot;
    topic: topic-tutorial-kafka
    value_type: text

service-tutorial-mqtt:
    type: mqtt
    brokers: &quot;broker:1883&quot;
    topic: topic-tutorial-mqtt
    value_type: text
</code></pre>
<p>The configuration file contains hierarchical keys and values in YAML format.</p>
<p>The top level key is the service name defined in SINETStream.
In the above example, <code>service-tutorial-kafka</code> and <code>service-tutorial-mqtt</code> are the service name.
The service name is a label to collectively handle various parameters related to the broker.
The service name specified in the arguments of the <code>Reader</code> and <code>Writer</code> sample programs corresponds to this label defined in the configuration file.</p>
<p>Specify the parameters related to the broker in the child element of the service name.
The parameters corresponding to the service name <code>service-tutorial-kafka</code> are as follows.</p>
<pre><code class="language-yaml">    type: kafka
    brokers: &quot;broker:9092&quot;
    topic: topic-tutorial-kafka
    value_type: text
</code></pre>
<p>Below is a brief description of each parameter.</p>
<ul>
<li>type<ul>
<li>Specify the type of the messaging system.</li>
<li>Use <code>kafka</code>, <code>mqtt</code>, etc.</li>
</ul>
</li>
<li>brokers<ul>
<li>Specify the address of the broker.</li>
<li>The format of the address is the host name and port number concatenated by a colon.</li>
</ul>
</li>
<li>topic<ul>
<li>Specify the topic name to/from which the messages are sent and received.</li>
</ul>
</li>
<li>value_type<ul>
<li>Specify the message type.</li>
<li>One of the following values can be used.<ul>
<li><code>text</code></li>
<li><code>byte_array</code></li>
</ul>
</li>
<li>The <code>text</code> type used in the tutorial specifies that the message is of type string</li>
</ul>
</li>
</ul>
<p>Please refer to the <a href="../../userguide/config/">user guide</a> for more information about configuration files.</p>
<h3 id="42-sinetstream-api">4.2. SINETStream API</h3>
<h4 id="reader">Reader</h4>
<p>In the <code>Reader</code> sample program <code>consumer.py</code>, the SINETStream API is used as follows.</p>
<pre><code class="language-python">with MessageReader(service) as reader:
    for message in reader:
        print(f&quot;topic={message.topic} value='{message.value}'&quot;)
</code></pre>
<blockquote>
<p>The entire code of the sample program consumer.py is available on <a href="https://github.com/nii-gakunin-cloud/sinetstream/blob/main/python/sample/text/consumer.py">GitHub</a>.</p>
</blockquote>
<p>First, create a <code>MessageReader</code> object to receive a message, specifying the service name in the argument.
<code>MessageReader</code> is usually executed by Python's <code>with</code> statement.
As a result, connection and disconnection to/from the broker are executed at the boundary of the <code>with</code> block.
The object named <code>reader</code> given by the <code>with</code> statement is iterable.
The object named <code>message</code> given by the <code>for</code> statement is a message received from the broker.</p>
<h4 id="writer">Writer</h4>
<p>In the <code>writer</code> sample program <code>producer.py</code>, the SINETStream API is used as follows.</p>
<pre><code class="language-python">with MessageWriter(service) as writer:
    while True:
        message = get_message()
        writer.publish(message)
</code></pre>
<blockquote>
<p>The entire code of the sample program <code>producer.py</code> is available on <a href="https://github.com/nii-gakunin-cloud/sinetstream/blob/main/python/sample/text/producer.py">GitHub</a>.</p>
</blockquote>
<p>First, create a <code>MessageWriter</code> object to send a message, specifying the service name in the argument.
<code>MessageWriter</code> is usually executed by Python's <code>with</code> statement.
As a result, connection and disconnection to/from the broker are executed at the boundary of the <code>with</code> block.
Send a message to the broker by invoking the <code>publish(message)</code> method of the object named <code>writer</code> given by the <code>with</code> statement.</p>
<p>Please refer to the <a href="../../userguide/api-python/">user guide</a> for more information about the SINETStream Python API.</p>
<h3 id="43-sinetstream-api-asynchronous-api">4.3. SINETStream API (asynchronous API)</h3>
<p>SINETStream v1.4 now supports asynchronous API.
We have prepared sample programs on Github that executes the same processing as described above with asynchronous API.</p>
<p><em><a href="https://github.com/nii-gakunin-cloud/sinetstream/blob/main/python/sample/text_async/consumer.py">Reader</a>
</em><a href="https://github.com/nii-gakunin-cloud/sinetstream/blob/main/python/sample/text_async/producer.py">Writer</a></p>
<h4 id="reader-asynchronous-api">Reader (asynchronous API)</h4>
<p>In the sample program consumer.py of the ‘Reader’ of the asynchronous API,
We use the following example to show how to use SINETStream API.</p>
<pre><code class="language-python">reader = AsyncMessageReader(service)
reader.on_message = show_message
reader.open()
</code></pre>
<p>First, let's create an ‘AsyncMessageReader’ object to receive the message. At that time, please specify the service name as an argument.</p>
<p>Next, specify the callback function to be called when a message is received in the ‘.on_message’ property. The callback function can receive the messages from the argument. The sample program uses the following callback function.</p>
<pre><code class="language-python">def show_message(message):
    ts = datetime.fromtimestamp(message.timestamp)
    print(f&quot;[{ts}] topic={message.topic} value='{message.value}'&quot;)
</code></pre>
<p>Finally, you call reader ’.open()’ to connect to the broker.</p>
<h4 id="writer-asynchronous-api">Writer (asynchronous API)</h4>
<p>In the sample program producer.py of the ‘Writer’ of the asynchronous API, we use the following example to show how to use SINETStream API.</p>
<pre><code class="language-python">with AsyncMessageWriter(service) as writer:
    while True:
        message = get_message()
        writer.publish(message)
</code></pre>
<p>First, create an ‘AsyncMessageWriter’ object for sending messages. At that time, specify the service name as an argument. ‘AsyncMessageWriter’ is usually executed by with statement of Python. This will connect to and disconnect from the broker within the block of the with statement. You can send a message to the broker by calling ‘.publish(message)’ on the value ‘writer’ which returned by the with statement.</p>
<p>In synchronous API, ‘.publish()’ blocks the sending process until it completed, but in asynchronous API, it returns without blocking the process. In addition, ‘.publish()’ of asynchronous API returns a <a href="https://github.com/syrusakbary/promise">Promise Object</a> to specify the processing after the processing result is confirmed.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <div class="site-footer-copyright">Copyright(C) National Institute of Informatics</div>
<div class="site-footer-logo">
  <a href="https://www.nii.ac.jp/">
    
    <img src="../../../images/NIIlogo_EN_ls.png" alt="NII National Institute of Informatics">
    
  </a>
</div>
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>