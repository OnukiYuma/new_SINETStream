
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://onukiyuma.github.io/SINETStream/en/tutorial-android/TUTORIAL-android-keychain/">
      
      
        <link rel="prev" href="../TUTORIAL-android-install/">
      
      
        <link rel="next" href="../sinetstreamhelper-tutorial-container/TUTORIAL-docker-container/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Installation of certificates in the system credential storage - SINETStream</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../styles/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-installation-of-certificates-in-the-system-credential-storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="SINETStream" class="md-header__button md-logo" aria-label="SINETStream" data-md-component="logo">
      
  <img src="../../../images/SiNETStream.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SINETStream
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation of certificates in the system credential storage
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../tutorial-android/TUTORIAL-android-keychain/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../docm/" class="md-tabs__link">
          
  
  About SINETStream

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../tutorial/" class="md-tabs__link">
          
  
  Tutorial

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../userguide/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer_guide/" class="md-tabs__link">
          
  
  Developer guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../news/20240329-release_v19/" class="md-tabs__link">
          
  
  News

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="SINETStream" class="md-nav__button md-logo" aria-label="SINETStream" data-md-component="logo">
      
  <img src="../../../images/SiNETStream.png" alt="logo">

    </a>
    SINETStream
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About SINETStream
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About SINETStream
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance measurement of SINETStream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livedemo/livedemo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live demo of SINETStream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Build SINETStream server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Build SINETStream server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server construction procedure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E8%AA%8D%E8%A8%BC%E5%B1%80%E3%81%A7%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%82%92%E4%BD%9C%E6%88%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a certificate with a private certificate authority
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/Kafkabroker%E3%81%AE%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mosquitto construction procedure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../server/brokers/mosquitto%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka broker setup procedure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update log
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python/Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Python/Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/TUTORIAL-STEP1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STEP1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/TUTORIAL-STEP2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STEP2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    sinetstream-android-echo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            sinetstream-android-echo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step1-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Send and receive text messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANDROID-STEP1
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2_3" >
        
          
          <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    sinetstream-android-sensor-publisher
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            sinetstream-android-sensor-publisher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step2-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish Sensor readout values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANDROID-STEP2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step2-webbrowser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A web interface for the sensor data visualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-step2-location/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatic update of the device location data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sinetstreamhelper-tutorial-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream Android Tutorial Container
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TUTORIAL-android-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation of the sample Android application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Installation of certificates in the system credential storage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Installation of certificates in the system credential storage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-who-should-read-this-document" class="md-nav__link">
    <span class="md-ellipsis">
      2. Who should read this document?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-preparations" class="md-nav__link">
    <span class="md-ellipsis">
      3. Preparations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Preparations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-prepare-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Prepare SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Prepare SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 Self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 Client certificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-prepare-a-file-management-application" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Prepare a file management application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-set-screen-lock" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Set screen lock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-obtain-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      4. Obtain SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Obtain SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-obtain-via-network" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Obtain via network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-obtain-via-offline-works" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Obtain via offline works
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-install-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      5. Install SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Install SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-guide-to-the-certificate-installation-screen" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Guide to the certificate installation screen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-install-a-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Install a self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-install-a-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Install a client certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-check-the-installed-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Check the installed self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-check-the-installed-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Check the installed client certificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sinetstreamhelper-tutorial-container/TUTORIAL-docker-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DOCKER-CONTAINER
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream for Android User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream for Android
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config-client-android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStream User Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SINETStreamHelper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            SINETStreamHelper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/libhelper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStreamHelper User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/api-libhelper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SINETStreamHelper Library
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication and authorization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../userguide/compat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Messaging system
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Messaging system
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_broker_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_broker_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    message type
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            message type
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_value_type_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_value_type_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    compression
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            compression
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_compression_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/plugin_compression_java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/message_format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message Format
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    News
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            News
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20240329-release_v19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.9版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20230526-release_v18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.8版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20220922-release_v17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.7版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20220427-release-demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デモパッケージ最新版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20211223-release_v16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20210324-release_v15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5版を公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200731-release_v14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200731-release_v13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../news/20200609-release_v12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2版公開のお知らせ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-who-should-read-this-document" class="md-nav__link">
    <span class="md-ellipsis">
      2. Who should read this document?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-preparations" class="md-nav__link">
    <span class="md-ellipsis">
      3. Preparations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Preparations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-prepare-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Prepare SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Prepare SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 Self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 Client certificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-prepare-a-file-management-application" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Prepare a file management application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-set-screen-lock" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Set screen lock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-obtain-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      4. Obtain SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Obtain SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-obtain-via-network" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Obtain via network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-obtain-via-offline-works" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Obtain via offline works
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-install-ssltls-certificate-files" class="md-nav__link">
    <span class="md-ellipsis">
      5. Install SSL/TLS certificate files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Install SSL/TLS certificate files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-guide-to-the-certificate-installation-screen" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Guide to the certificate installation screen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-install-a-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Install a self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-install-a-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Install a client certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-check-the-installed-self-signed-server-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Check the installed self-signed server certificate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-check-the-installed-client-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Check the installed client certificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<!--
Copyright (C) 2021 National Institute of Informatics

Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<h1 id="tutorial-installation-of-certificates-in-the-system-credential-storage">TUTORIAL - Installation of certificates in the system credential storage</h1>
<h2 id="1-introduction">1. Introduction</h2>
<p>When an Android device connects to the peer broker using SSL/TLS,
the broker requests to present a client certificate and/or a
self-signed server certificate to the Android device, depending on
the broker setting.
That is, you need to pre-install the required SSL/TLS certificates
on the Android device.</p>
<p>There are two options how an Android application access to the
SSL/TLS certificates.</p>
<pre>
* a) When you implement an Android application, embed the SSL/TLS certificate files as the asset of the program.
* b) Pre-install the required certificates in the system credential storage, and refer them on application runtime.
</pre>

<p>On the latter case <code>b)</code>, you do not have to embed any sensitive
information such like SSL/TLS certificates in a program.</p>
<pre>
* Even if the Android device has lost or stolen, sensitive information will not be leaked to the third party.
* Upon the expiration of SSL/TLS certificates, you can update them without modifying the program.
</pre>
<p>That is, you can reduce security threats because of above points.
In this document, we focus on the case <code>b)</code> and present concrete
procedures about how to install the SSL/TLS certificates in the
Android system credential storage (<code>KeyChain</code>) [1].</p>
<p>The screen shots on this document are taken on a Google Pixel 4
(Android 11) device.
There may be some differences of screen appearances or descriptive
expressions depending on the OS version.
Please read accordingly, based on the running environment of your
Android device.</p>
<p>[1] <a href="https://developer.android.com/training/articles/keystore#SecurityFeatures">Security features</a></p>
<h2 id="2-who-should-read-this-document">2. Who should read this document?</h2>
<p>If an Android device going to connect to a broker using SSL/TLS,
required certificates must have prepared on the Android device.
It depends the security policy on the broker side that determines
what kind of certificates are required on the Android side.</p>
<ul>
<li>Is the broker that an Android device going to connect trustworthy?</li>
<li>Use a server certificate signed by a commercial certificate
authority (CA)[2], such like VeriSign
    --&gt; Nothing to do on the Android side.</li>
<li>
<p>Use a server certificate signed by the broker itself
    --&gt; The Android device must install the self-signed server certificate.</p>
</li>
<li>
<p>Is the Android device that going to connect to the broker trustworthy?</p>
</li>
<li>The broker DOES trust the connecting Android device
    --&gt; Nothing to do on the Android side.</li>
<li>The broker challenges the connecting Android device
    --&gt; The Android device must install the designated client certificate.</li>
</ul>
<p>To summarize, if your Android device connects to the broker which
<code>uses a server certificate signed by a commercial CA, and does not
require any client certificate</code>, then you can finish here.
Otherwise, install appropriate SSL/TLS certificates on your Android
device referring the following descriptions.</p>
<p>[2] <a href="https://en.wikipedia.org/wiki/Certificate_authority">Certificate authority</a></p>
<h2 id="3-preparations">3. Preparations</h2>
<h3 id="31-prepare-ssltls-certificate-files">3.1 Prepare SSL/TLS certificate files</h3>
<p>Ask management staff to issue SSL/TLS certificate files to be installed
on your Android device.</p>
<h4 id="311-self-signed-server-certificate">3.1.1 Self-signed server certificate</h4>
<ul>
<li>Prepare a X.509 certificate file in PEM format (file extension <code>.crt</code>
or <code>.cer</code>) [3].</li>
<li>We use a certificate file <code>vm00_cacert.crt</code> as an example.</li>
</ul>
<pre><code class="language-console">PC% file ./vm00_cacert.crt
./vm00_cacert.crt: PEM certificate

PC% openssl verify vm00_cacert.crt
vm00_cacert.crt: C = JP, ST = Example_State, O = Example_Organization, CN = private-ca
error 18 at 0 depth lookup:self signed certificate
OK
</code></pre>
<p>[3] <a href="https://en.wikipedia.org/wiki/X.509">X.509</a></p>
<h4 id="312-client-certificate">3.1.2 Client certificate</h4>
<ul>
<li>Prepare a PFX (Personal Information Exchange) file in PKCS#12 format
(file extension <code>.pfx</code>) [4], and its corresponding password.</li>
<li>We use a certificate file <code>client03.pfx</code> and its password as an example.</li>
</ul>
<pre><code class="language-console">PC% file ./client03*
./client03.pfx: data
./client03.txt: ASCII text

PC% openssl pkcs12 -in client03.pfx -info -noout
Enter Import Password:
MAC Iteration 2048
MAC verified OK
PKCS7 Encrypted data: pbeWithSHA1And40BitRC2-CBC, Iteration 2048
Certificate bag
PKCS7 Data
Shrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048
</code></pre>
<p>[4] <a href="https://en.wikipedia.org/wiki/PKCS">PKCS#12</a></p>
<h3 id="32-prepare-a-file-management-application">3.2 Prepare a file management application</h3>
<ul>
<li>You can use any application which can handle the SSL/TLS
certificate files.</li>
<li>Your Android device may already have a file management application,
something like a "File Manager".</li>
<li>In this document, we suppose to use the Google application
<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.files">Files by Google</a>
and describe operations accordingly.</li>
</ul>
<h3 id="33-set-screen-lock">3.3 Set screen lock</h3>
<p><em>This section is optional for Android 10 or later devices. [5]</em></p>
<p>If you install a user specified secret file in the system credential
storage (<code>KeyChain</code>), you are required to set screen lock.
With the fact that you can unlock screen, you passed the device
authentication as the legitimate owner.
Though you can proceed without setting screen lock, you will be
prompted to do so at the time of SSL/TLS certificate installation.</p>
<pre>
    Home
    --> Settings
      --> Security
        --> Screen lock
          --> Choose a screen lock method (except "None" and "Swipe")
</pre>

<p>[5] <a href="https://developer.android.com/about/versions/10/behavior-changes-all#keychain">KeyChain behavior changes and improvements</a></p>
<h2 id="4-obtain-ssltls-certificate-files">4. Obtain SSL/TLS certificate files</h2>
<h3 id="41-obtain-via-network">4.1 Obtain via network</h3>
<ul>
<li>
<p>File server</p>
</li>
<li>
<p>Access to the file server by the <code>Chrome</code> browser and download the
target SSL/TLS certificate files to your Android device.</p>
</li>
<li>Downloaded files will be located under the <code>Downloads</code> directory.</li>
<li>
<p>Upon completion, you will be asked whether to install the certificate
file immediately. But please do nothing here.</p>
</li>
<li>
<p>Google Drive</p>
</li>
<li>
<p>Put the target SSL/TLS certificate files somewhere on Google Drive
with your Gmail account.</p>
</li>
</ul>
<h3 id="42-obtain-via-offline-works">4.2 Obtain via offline works</h3>
<ul>
<li>SD card</li>
</ul>
<p>This method is handy if your Android device has a SD card slot.</p>
<pre>
    1) Turn off power of your Android device.
    2) Remove the SD card from the chassis.
    3) Insert the SD card to your working PC and mount to the file system.
    4) Copy the target SSL/TLS certificate files to the SD card.
       Destination path can be anywhere, but root directory is handy.
    5) Unmount from the file system and eject the SD card.
    6) Insert the SD card to your Android device.
    7) Turn on power of your Android device.
</pre>

<ul>
<li>Transfer SSL/TLS certificate files via USB cable</li>
</ul>
<p><em>This method is targeted for developers.</em></p>
<ul>
<li>Connect the target Android device to your workstation by a USB cable.
Beware <code>screen lock</code> is cleared beforehand.</li>
<li>If the target Android device is <code>USB debugging</code> enabled, the
<code>Android Debug Bridge (adb)</code>[6] challenges for the device authentication.</li>
<li>Answer <code>OK</code> to the confirmation dialog on the target Android device,
so that the Android device is recognized by the <code>adb</code>.</li>
<li>Execute following commands on your workstation.<ul>
<li>Destination path is slightly different before and after Android 11.</li>
</ul>
</li>
</ul>
<pre><code class="language-console"># Android 10 or earlier
% adb push client03.pfx /mnt/sdcard
% adb push vm00_cacert.crt /mnt/sdcard
</code></pre>
<pre><code class="language-console"># Android 11
% adb push client03.pfx /mnt/sdcard
adb: error: stat failed when trying to push to /mnt/sdcard: Permission denied

% adb push client03.pfx /sdcard
% adb push vm00_cacert.crt /sdcard
</code></pre>
<p>[6] <a href="https://developer.android.com/studio/command-line/adb">Android Debug Bridge (adb)</a></p>
<h2 id="5-install-ssltls-certificate-files">5. Install SSL/TLS certificate files</h2>
<h3 id="51-guide-to-the-certificate-installation-screen">5.1 Guide to the certificate installation screen</h3>
<p><img alt="Guide to the certificate installation screen" src="../../../tutorial-android/images/common/keychain_setup1.png" /></p>
<p>To manipulate certificates managed by the system credential storage
(<code>KeyChain</code>), you need to dig into the deep layer of system settings.
At first, move to the base location as follows.</p>
<ul>
<li>Open the <code>Settings</code> application on your Android device, and move
to the <code>Security</code> setting screen (a).</li>
<li>As the initial state, <code>Encryption &amp; credential</code> settings are collapsed
under the item <code>Advanced</code>. If you expand it, the screen looks like (b).</li>
<li>On the screen (b), select the item <code>Encryption &amp; credential</code> and
move to the screen (c).</li>
<li>On the screen (c), select the item <code>Install a certificate</code> and move
to the certificate installation screen, to be noted afterword.</li>
</ul>
<h3 id="52-install-a-self-signed-server-certificate">5.2 Install a self-signed server certificate</h3>
<p><img alt="Install a self-signed server certificate" src="../../../tutorial-android/images/common/keychain_setup2.png" /></p>
<ul>
<li>If you select the item <code>CA certificate</code> on the screen (d), a warning
  dialog about your data privacy (e) will be shown.</li>
<li>If you press the button <code>Install anyway</code>, you will be challenged to
  clear the device authentication like screen unlock.</li>
<li>Once the device authentication has passed, you will be redirected
  to the file selection screen (f).</li>
<li>Select the target certificate file (with a fingerprint icon).</li>
<li>In this example, select the file <code>vm00_cacert.crt</code> located immediate
    under the root file system.</li>
<li>If you put the target certificate file on a different file system
    such like SD card or Google Drive, press the burger-icon on the top left
    corner of the screen (f).</li>
<li>If the installation finished successfully, a toast message will be
  briefly shown, and you will be redirected to the initial screen (d).</li>
</ul>
<h3 id="53-install-a-client-certificate">5.3 Install a client certificate</h3>
<p><img alt="Install a client certificate(1)" src="../../../tutorial-android/images/common/keychain_setup3.png" /></p>
<ul>
<li>If you select the item <code>VPN &amp; app user certificate</code> on the screen (g),
  you will be redirected to the file selection screen(h), without device
  authentication.</li>
<li>Select the target certificate file (with a fingerprint icon).</li>
<li>In this example, select the file <code>client03.pfx</code> located immediate
    under the root file system.</li>
<li>If you put the target certificate file on a different file system
    such like SD card or Google Drive, press the burger-icon on the top left
    corner of the screen (h).</li>
<li>You will be prompted to enter password to extract the certificate (i).</li>
<li>Press <code>OK</code> button to finish.</li>
</ul>
<p><img alt="Install a client certificate(2)" src="../../../tutorial-android/images/common/keychain_setup4.png" /></p>
<ul>
<li>A progress dialog (j) will be shown while processing the certificates.</li>
<li>It may take time, around more than several minutes. Beware for a
    long wait.</li>
<li>Once the extraction finishes, an dialog (k) which presents an alias
  name to distinguish the certificate installed in the system credential
  storage.</li>
<li>The initial value of the alias name has automatically assigned by
    system as a random hexadecimal string.</li>
<li>On the dialog (i), rewrite the alias name to a human friendly one
    (such like <code>client03</code> which is the same as the certificate file name).</li>
<li>Press <code>OK</code> button to finish.</li>
<li>If the installation finished successfully, a toast message will be
  briefly shown, and you will be redirected to the initial screen (l).</li>
</ul>
<h3 id="54-check-the-installed-self-signed-server-certificate">5.4 Check the installed self-signed server certificate</h3>
<p><img alt="Check the installed self-signed server certificate" src="../../../tutorial-android/images/common/keychain_setup5.png" /></p>
<p>Go through the following steps to check if the self-signed server
certificate has properly installed in the system credential storage
(<code>KeyChain</code>).</p>
<ul>
<li>Go back to the certification settings screen (p), and select the
  item <code>Trusted credentials</code>.</li>
<li>In the trusted credential listing screen (q), there are two kinds of
  tabs; <code>SYSTEM</code> and <code>USER</code>.</li>
<li>The <code>SYSTEM</code> tab contains public root certificates, and entries
are maintained by the Android system.</li>
<li>The <code>USER</code> tab contains user-managed root certificates, such like
    a self-signed server certificate described in this document.</li>
<li>In the screen (q), the <code>USER</code> tab is empty at initial state, but now
  you can see a summary of the installed self-signed server certificate.</li>
<li>If you select the item <code>private-ca</code> shown in the screen (q), its
  certificate details can be seen in a dialog (r).</li>
</ul>
<h3 id="55-check-the-installed-client-certificate">5.5 Check the installed client certificate</h3>
<p><img alt="Check the installed client certificate(1)" src="../../../tutorial-android/images/common/keychain_setup6.png" /></p>
<p>Go through the following steps to check if the client certificate has
properly installed in the system credential storage (<code>KeyChain</code>).</p>
<ul>
<li>Go back to the certification settings screen (m), and select the
item <code>User credentials</code>.</li>
<li>In the user credential listing screen (n), you can see items with
alias name and its purpose.</li>
<li>The screen (n) is empty at initial state, but now you can see the
installed client certificate (alias name: <code>client03</code>).</li>
<li>The screen (n) has another item which corresponds to the self-signed
server certificate.  We will address this later again.</li>
<li>If you select the item <code>client03</code> shown in the screen (n), its
credential details can be seen in a dialog (o).</li>
</ul>
<p><img alt="Check the installed client certificate(2)" src="../../../tutorial-android/images/common/keychain_setup7.png" /></p>
<p>If you select the self-signed server certificate (No alias name)
in the screen (n2), its credential details can be seen in a dialog (o2).
Check the difference between (o) and (o2), especially in the red circle.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <div class="site-footer-copyright">Copyright(C) National Institute of Informatics</div>
<div class="site-footer-logo">
  <a href="https://www.nii.ac.jp/">
    
    <img src="../../../images/NIIlogo_EN_ls.png" alt="NII National Institute of Informatics">
    
  </a>
</div>
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>